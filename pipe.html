<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Let’s program in R</title>
  <meta name="description" content="R Coursebook">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Let’s program in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="R Coursebook" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Let’s program in R" />
  
  <meta name="twitter:description" content="R Coursebook" />
  

<meta name="author" content="Damir Pintar">


<meta name="date" content="2020-01-06">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="apply.html">
<link rel="next" href="dates.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />








<style type="text/css">
.showopt {
  background-color: #004c93;
  color: #FFFFFF; 
  width: 140px;
  height: 4	0px;
  text-align: center;
  vertical-align: middle !important;
  float: right;
  font-family: sans-serif;
  font-size:10 pt;
  border-radius: 8px;
}

.showopt:hover {
    background-color: #dfe4f2;
    color: #004c93;
}

pre.plot {
  background-color: white !important;
}
</style>

<script>
 $(document).ready(function() {

  $chunks = $('.fold');

  $chunks.each(function () {

    // add button to source code chunks
    if ( $(this).hasClass('s') ) {
      $('pre.r', this).prepend("<div class=\"showopt\">Show solution</div><br style=\"line-height:22px;\"/>");
      $('pre.r', this).children('code').attr('class', 'folded');
    }

    // add button to output chunks
    if ( $(this).hasClass('o') ) {
      $('pre:not(.r)', this).has('code').prepend("<div class=\"showopt\">Show results</div><br style=\"line-height:22px;\"/>");
      $('pre:not(.r)', this).children('code:not(r)').addClass('folded');

      // add button to plots
      $(this).find('img').wrap('<pre class=\"plot\"></pre>');
      $('pre.plot', this).prepend("<div class=\"showopt\">Show figure</div><br style=\"line-height:22px;\"/>");
      $('pre.plot', this).children('img').addClass('folded');

    }
  });

  // hide all chunks when document is loaded
  $('.folded').css('display', 'none')

  // function to toggle the visibility
  $('.showopt').click(function() {
    var label = $(this).html();
    if (label.indexOf("Show") >= 0) {
      $(this).html(label.replace("Show", "Hide"));
    } else {
      $(this).html(label.replace("Hide", "Show"));
    }
    $(this).siblings('code, img').slideToggle('fast', 'swing');
  });
});
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>(“Introduction to programming language R” course book)</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#foreword"><i class="fa fa-check"></i>Foreword</a></li>
</ul></li>
<li class="part"><span><b>I Basic elements of R</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-r"><i class="fa fa-check"></i><b>1.1</b> What is R?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#general-facts-about-r"><i class="fa fa-check"></i><b>1.1.1</b> General facts about R</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#r-alternatives"><i class="fa fa-check"></i><b>1.1.2</b> R alternatives</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#installing-software-support"><i class="fa fa-check"></i><b>1.2</b> Installing Software Support</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#overview-of-the-development-interface-rstudio"><i class="fa fa-check"></i><b>1.3</b> Overview of the development interface <em>RStudio</em></a><ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#interactive-console"><i class="fa fa-check"></i><b>1.3.1</b> Interactive console</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#writing-r-scripts"><i class="fa fa-check"></i><b>1.3.2</b> Writing R scripts</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction.html"><a href="introduction.html#r-markdown"><i class="fa fa-check"></i><b>1.3.3</b> <em>R Markdown</em></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#how-to-use-this-coursebook"><i class="fa fa-check"></i><b>1.4</b> How to use this coursebook?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tipovi.html"><a href="tipovi.html"><i class="fa fa-check"></i><b>2</b> Basic data types and operators</a><ul>
<li class="chapter" data-level="2.1" data-path="tipovi.html"><a href="tipovi.html#basic-data-types"><i class="fa fa-check"></i><b>2.1</b> Basic data types</a></li>
<li class="chapter" data-level="2.2" data-path="tipovi.html"><a href="tipovi.html#operators"><i class="fa fa-check"></i><b>2.2</b> Operators</a></li>
<li class="chapter" data-level="2.3" data-path="tipovi.html"><a href="tipovi.html#missing-unknown-and-non-existent-values"><i class="fa fa-check"></i><b>2.3</b> Missing, unknown, and non-existent values</a></li>
<li class="chapter" data-level="" data-path="tipovi.html"><a href="tipovi.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vektori.html"><a href="vektori.html"><i class="fa fa-check"></i><b>3</b> Vectors, matrices and lists</a><ul>
<li class="chapter" data-level="3.1" data-path="vektori.html"><a href="vektori.html#vector"><i class="fa fa-check"></i><b>3.1</b> Vector</a><ul>
<li class="chapter" data-level="3.1.1" data-path="vektori.html"><a href="vektori.html#create-a-vector"><i class="fa fa-check"></i><b>3.1.1</b> Create a vector</a></li>
<li class="chapter" data-level="3.1.2" data-path="vektori.html"><a href="vektori.html#operator"><i class="fa fa-check"></i><b>3.1.2</b> Operator <code>[</code></a></li>
<li class="chapter" data-level="3.1.3" data-path="vektori.html"><a href="vektori.html#principle-of-vectorization-and-recycling"><i class="fa fa-check"></i><b>3.1.3</b> Principle of vectorization and recycling</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vektori.html"><a href="vektori.html#index-vectors"><i class="fa fa-check"></i><b>3.2</b> Index vectors</a><ul>
<li class="chapter" data-level="3.2.1" data-path="vektori.html"><a href="vektori.html#location-indexing"><i class="fa fa-check"></i><b>3.2.1</b> Location Indexing</a></li>
<li class="chapter" data-level="3.2.2" data-path="vektori.html"><a href="vektori.html#conditional-indexing"><i class="fa fa-check"></i><b>3.2.2</b> Conditional indexing</a></li>
<li class="chapter" data-level="3.2.3" data-path="vektori.html"><a href="vektori.html#label-based-indexing"><i class="fa fa-check"></i><b>3.2.3</b> Label-based indexing</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="vektori.html"><a href="vektori.html#matrices-and-arrays"><i class="fa fa-check"></i><b>3.3</b> Matrices and arrays</a><ul>
<li class="chapter" data-level="3.3.1" data-path="vektori.html"><a href="vektori.html#matrix-splicing"><i class="fa fa-check"></i><b>3.3.1</b> Matrix splicing</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="vektori.html"><a href="vektori.html#lists"><i class="fa fa-check"></i><b>3.4</b> Lists</a></li>
<li class="chapter" data-level="" data-path="vektori.html"><a href="vektori.html#exercises-1"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="okviri.html"><a href="okviri.html"><i class="fa fa-check"></i><b>4</b> Data frames and factors</a><ul>
<li class="chapter" data-level="4.1" data-path="okviri.html"><a href="okviri.html#data-frames"><i class="fa fa-check"></i><b>4.1</b> Data frames</a></li>
<li class="chapter" data-level="4.2" data-path="okviri.html"><a href="okviri.html#selecting-rows-and-columns"><i class="fa fa-check"></i><b>4.2</b> Selecting rows and columns</a></li>
<li class="chapter" data-level="4.3" data-path="okviri.html"><a href="okviri.html#adding-and-deleting-rows-and-columns"><i class="fa fa-check"></i><b>4.3</b> Adding and deleting rows and columns</a></li>
<li class="chapter" data-level="4.4" data-path="okviri.html"><a href="okviri.html#factors"><i class="fa fa-check"></i><b>4.4</b> Factors</a></li>
<li class="chapter" data-level="" data-path="okviri.html"><a href="okviri.html#exercises-2"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="control.html"><a href="control.html"><i class="fa fa-check"></i><b>5</b> Flow control and objects</a><ul>
<li class="chapter" data-level="5.1" data-path="control.html"><a href="control.html#flow-control-commands"><i class="fa fa-check"></i><b>5.1</b> Flow control commands</a><ul>
<li class="chapter" data-level="5.1.1" data-path="control.html"><a href="control.html#conditional-execution-of-commands"><i class="fa fa-check"></i><b>5.1.1</b> Conditional execution of commands</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="control.html"><a href="control.html#program-loops"><i class="fa fa-check"></i><b>5.2</b> Program Loops</a><ul>
<li class="chapter" data-level="5.2.1" data-path="control.html"><a href="control.html#loop-repeat"><i class="fa fa-check"></i><b>5.2.1</b> Loop <code>repeat</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="control.html"><a href="control.html#while-loop"><i class="fa fa-check"></i><b>5.2.2</b> <code>while</code> loop</a></li>
<li class="chapter" data-level="5.2.3" data-path="control.html"><a href="control.html#for-loop"><i class="fa fa-check"></i><b>5.2.3</b> <code>for</code> loop</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="control.html"><a href="control.html#object-models-in-r-language"><i class="fa fa-check"></i><b>5.3</b> Object models in R language</a><ul>
<li class="chapter" data-level="5.3.1" data-path="control.html"><a href="control.html#overview-of-the-s3-object-model"><i class="fa fa-check"></i><b>5.3.1</b> Overview of the S3 object model</a></li>
<li class="chapter" data-level="5.3.2" data-path="control.html"><a href="control.html#generic-functions"><i class="fa fa-check"></i><b>5.3.2</b> Generic functions</a></li>
<li class="chapter" data-level="5.3.3" data-path="control.html"><a href="control.html#conclusion-on-s3-objects"><i class="fa fa-check"></i><b>5.3.3</b> Conclusion on S3 objects</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="control.html"><a href="control.html#exercises-3"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>6</b> Packages, built-in functions and environments</a><ul>
<li class="chapter" data-level="6.1" data-path="packages.html"><a href="packages.html#working-with-packages"><i class="fa fa-check"></i><b>6.1</b> Working with packages</a></li>
<li class="chapter" data-level="6.2" data-path="packages.html"><a href="packages.html#built-in-functions"><i class="fa fa-check"></i><b>6.2</b> Built-in functions</a></li>
<li class="chapter" data-level="6.3" data-path="packages.html"><a href="packages.html#environments"><i class="fa fa-check"></i><b>6.3</b> Environments</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#exercises-4"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="user.html"><a href="user.html"><i class="fa fa-check"></i><b>7</b> User Defined Functions</a><ul>
<li class="chapter" data-level="7.1" data-path="user.html"><a href="user.html#how-to-define-a-function"><i class="fa fa-check"></i><b>7.1</b> How to define a function</a><ul>
<li class="chapter" data-level="7.1.1" data-path="user.html"><a href="user.html#the-copy-on-modify-principle"><i class="fa fa-check"></i><b>7.1.1</b> The “copy-on-modify” principle</a></li>
<li class="chapter" data-level="7.1.2" data-path="user.html"><a href="user.html#function-as-an-object"><i class="fa fa-check"></i><b>7.1.2</b> Function as an object</a></li>
<li class="chapter" data-level="7.1.3" data-path="user.html"><a href="user.html#generic-functions-1"><i class="fa fa-check"></i><b>7.1.3</b> Generic functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="user.html"><a href="user.html#exercises-5"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="apply.html"><a href="apply.html"><i class="fa fa-check"></i><b>8</b> ‘Apply’ family of functions</a><ul>
<li class="chapter" data-level="8.1" data-path="apply.html"><a href="apply.html#what-are-apply-functions"><i class="fa fa-check"></i><b>8.1</b> What are <code>apply</code> functions?</a></li>
<li class="chapter" data-level="8.2" data-path="apply.html"><a href="apply.html#the-apply-function"><i class="fa fa-check"></i><b>8.2</b> The <code>apply</code> function</a></li>
<li class="chapter" data-level="8.3" data-path="apply.html"><a href="apply.html#the-lapply-sapply-and-vapply-functions"><i class="fa fa-check"></i><b>8.3</b> The <code>lapply</code>, <code>sapply</code> and <code>vapply</code> functions</a></li>
<li class="chapter" data-level="8.4" data-path="apply.html"><a href="apply.html#other-functions-from-the-apply-family-and-the-available-alternatives"><i class="fa fa-check"></i><b>8.4</b> Other functions from the <code>apply</code> family and the available alternatives</a></li>
<li class="chapter" data-level="" data-path="apply.html"><a href="apply.html#exercises-6"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Data management and visualizations</b></span></li>
<li class="chapter" data-level="9" data-path="pipe.html"><a href="pipe.html"><i class="fa fa-check"></i><b>9</b> Pipeline operator and tidy data</a><ul>
<li class="chapter" data-level="9.1" data-path="pipe.html"><a href="pipe.html#tidy-data"><i class="fa fa-check"></i><b>9.1</b> Tidy data</a><ul>
<li class="chapter" data-level="9.1.1" data-path="pipe.html"><a href="pipe.html#the-gather-andspread-functions"><i class="fa fa-check"></i><b>9.1.1</b> The <code>gather</code> and<code>spread</code> functions</a></li>
<li class="chapter" data-level="9.1.2" data-path="pipe.html"><a href="pipe.html#the-separate-and-unite-functions"><i class="fa fa-check"></i><b>9.1.2</b> The <code>separate</code> and <code>unite</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="pipe.html"><a href="pipe.html#exercise-tasks"><i class="fa fa-check"></i>Exercise Tasks</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dates.html"><a href="dates.html"><i class="fa fa-check"></i><b>10</b> Working with dates and character strings</a><ul>
<li class="chapter" data-level="10.1" data-path="dates.html"><a href="dates.html#working-with-dates"><i class="fa fa-check"></i><b>10.1</b> Working with dates</a><ul>
<li class="chapter" data-level="10.1.1" data-path="dates.html"><a href="dates.html#the-date-class"><i class="fa fa-check"></i><b>10.1.1</b> The <code>Date</code> class</a></li>
<li class="chapter" data-level="10.1.2" data-path="dates.html"><a href="dates.html#theposixct-andposixlt-classes"><i class="fa fa-check"></i><b>10.1.2</b> The<code>POSIXct</code> and<code>POSIXlt</code> classes</a></li>
<li class="chapter" data-level="10.1.3" data-path="dates.html"><a href="dates.html#the-lubridate-package"><i class="fa fa-check"></i><b>10.1.3</b> The <code>lubridate</code> package</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="dates.html"><a href="dates.html#working-with-character-strings"><i class="fa fa-check"></i><b>10.2</b> Working with character strings</a><ul>
<li class="chapter" data-level="10.2.1" data-path="dates.html"><a href="dates.html#text-analysis-and-regular-expressions"><i class="fa fa-check"></i><b>10.2.1</b> Text analysis and regular expressions</a></li>
<li class="chapter" data-level="10.2.2" data-path="dates.html"><a href="dates.html#the-stringr-package"><i class="fa fa-check"></i><b>10.2.2</b> The <code>stringr</code> package</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dates.html"><a href="dates.html#exercise-tasks-1"><i class="fa fa-check"></i>Exercise Tasks</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>11</b> Managing data frames with <code>dplyr</code> package -</a><ul>
<li class="chapter" data-level="11.1" data-path="dplyr.html"><a href="dplyr.html#dataset-titanic"><i class="fa fa-check"></i><b>11.1</b> Dataset: <em>Titanic</em></a></li>
<li class="chapter" data-level="11.2" data-path="dplyr.html"><a href="dplyr.html#creating-a-subset-of-observations-with-filter-andslice"><i class="fa fa-check"></i><b>11.2</b> Creating a subset of observations with <code>filter</code> and<code>slice</code></a></li>
<li class="chapter" data-level="11.3" data-path="dplyr.html"><a href="dplyr.html#creating-a-subset-of-columns-with-select"><i class="fa fa-check"></i><b>11.3</b> Creating a subset of columns with <code>select</code></a></li>
<li class="chapter" data-level="11.4" data-path="dplyr.html"><a href="dplyr.html#creating-new-columns-with-mutate"><i class="fa fa-check"></i><b>11.4</b> Creating new columns with <code>mutate</code></a></li>
<li class="chapter" data-level="11.5" data-path="dplyr.html"><a href="dplyr.html#sample-dataset-houston-flights"><i class="fa fa-check"></i><b>11.5</b> Sample Dataset: <em>Houston flights</em></a></li>
<li class="chapter" data-level="11.6" data-path="dplyr.html"><a href="dplyr.html#grouping-and-aggregation-with-group_by-andsummarise"><i class="fa fa-check"></i><b>11.6</b> Grouping and aggregation with <code>group_by</code> and<code>summarise</code></a></li>
<li class="chapter" data-level="11.7" data-path="dplyr.html"><a href="dplyr.html#merging-data-frames-with-join-functions"><i class="fa fa-check"></i><b>11.7</b> Merging data frames with join functions</a></li>
<li class="chapter" data-level="11.8" data-path="dplyr.html"><a href="dplyr.html#integrating-dplyr-with-relational-databases"><i class="fa fa-check"></i><b>11.8</b> Integrating <code>dplyr</code> with relational databases</a></li>
<li class="chapter" data-level="" data-path="dplyr.html"><a href="dplyr.html#exercises-7"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>12</b> Visualising data with <code>ggplot2</code> package</a><ul>
<li class="chapter" data-level="12.1" data-path="ggplot2.html"><a href="ggplot2.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>12.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="12.2" data-path="ggplot2.html"><a href="ggplot2.html#data-visualization-using-the-r-language"><i class="fa fa-check"></i><b>12.2</b> Data visualization using the R language</a></li>
<li class="chapter" data-level="12.3" data-path="ggplot2.html"><a href="ggplot2.html#grammar-of-graphics-and-the-ggplot2-package"><i class="fa fa-check"></i><b>12.3</b> Grammar of graphics and the <code>ggplot2</code> package</a><ul>
<li class="chapter" data-level="12.3.1" data-path="ggplot2.html"><a href="ggplot2.html#aspects-of-data-aesthetics-and-geometries"><i class="fa fa-check"></i><b>12.3.1</b> Aspects of data, aesthetics and geometries</a></li>
<li class="chapter" data-level="12.3.2" data-path="ggplot2.html"><a href="ggplot2.html#fixed-geometry-parameters"><i class="fa fa-check"></i><b>12.3.2</b> Fixed geometry parameters</a></li>
<li class="chapter" data-level="12.3.3" data-path="ggplot2.html"><a href="ggplot2.html#the-aspects-of-statistics-and-position"><i class="fa fa-check"></i><b>12.3.3</b> The aspects of statistics and position</a></li>
<li class="chapter" data-level="12.3.4" data-path="ggplot2.html"><a href="ggplot2.html#the-relationship-between-geometry-and-statistics"><i class="fa fa-check"></i><b>12.3.4</b> The relationship between geometry and statistics</a></li>
<li class="chapter" data-level="12.3.5" data-path="ggplot2.html"><a href="ggplot2.html#storing-a-graph-to-a-file"><i class="fa fa-check"></i><b>12.3.5</b> Storing a graph to a file</a></li>
<li class="chapter" data-level="12.3.6" data-path="ggplot2.html"><a href="ggplot2.html#aspects-of-scale-coordinate-system-and-theme"><i class="fa fa-check"></i><b>12.3.6</b> Aspects of scale, coordinate system and theme</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="ggplot2.html"><a href="ggplot2.html#tu"><i class="fa fa-check"></i><b>12.4</b> TU</a><ul>
<li class="chapter" data-level="12.4.1" data-path="ggplot2.html"><a href="ggplot2.html#conditional-faceted-graphs"><i class="fa fa-check"></i><b>12.4.1</b> Conditional (faceted) graphs</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="ggplot2.html"><a href="ggplot2.html#graphs-in-exploratory-analysis-and-reporting"><i class="fa fa-check"></i><b>12.5</b> Graphs in Exploratory Analysis and Reporting</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#exercises-8"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Let’s program in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="pipe" class="section level1">
<h1><span class="header-section-number">9</span> Pipeline operator and tidy data</h1>
<p>Let’s look at the following example: imagine that in R we want to create 100 random real variables from the range of [0,100], round them to two decimals, select a sample of 10 variables from this set, calculate the arithmetic mean of the sample and print it on the screen. One possible solution could be:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb300-1" title="1"><span class="kw">set.seed</span>(<span class="dv">1234</span>) <span class="co"># (for repeatability)</span></a>
<a class="sourceLine" id="cb300-2" title="2"></a>
<a class="sourceLine" id="cb300-3" title="3">res &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">100</span>) <span class="co"># 100 random variables from uniform distribution from 0 to 100</span></a>
<a class="sourceLine" id="cb300-4" title="4">res &lt;-<span class="st"> </span><span class="kw">round</span>(res, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb300-5" title="5">res &lt;-<span class="st"> </span><span class="kw">sample</span>(res, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb300-6" title="6">res &lt;-<span class="st"> </span><span class="kw">mean</span>(res)</a>
<a class="sourceLine" id="cb300-7" title="7">res</a></code></pre></div>
<pre><code>## [1] 51.123</code></pre>
<p>This kind of code has a lot of unnecessary repetition - in every line we use the <code>res</code> variable as well as the assignment operator <code>res</code> variable so we can store the in-between results. Alternatively, we could do everything in one row:</p>
<hr />
<p><strong>Assignment 9.1 - Nested functions</strong></p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb302-1" title="1"><span class="kw">set.seed</span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb302-2" title="2"></a>
<a class="sourceLine" id="cb302-3" title="3"><span class="co"># repeat the above example, but with only one line of code</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb303-1" title="1"><span class="kw">mean</span>(<span class="kw">sample</span>(<span class="kw">round</span>(<span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">100</span>), <span class="dv">2</span>), <span class="dv">10</span>))</a></code></pre></div>
<pre><code>## [1] 51.123</code></pre>
</div>
<hr />
<p>Here we see a typical example of a “code sandwich” which is not only often seen in R, but also appears in most programming languages. When we use the result of one function as an input to another, we have to “nest” it in the subsequent function call ending up with an error-prone code which is equally difficult to both write and read.</p>
<p>A natural way of “solving” a series of instructions from the previous example would be to resolve them sequentially, i.e. from “left to right”; when we finish one task, the result becomes the input for the following task and so on until the process is complete. It would be benefitial if we apply this approach through programming code. This was precisely the motivation for the development of the so-called <em>pipeline</em> operator, provided by the package <code>magrittr</code> <span class="citation">(Bache and Wickham <a href="#ref-R-magrittr">2014</a>)</span>.</p>
<p>The weird name package is actually inspired by the name of abstract painter Rene Magritte, more specifically his famous painting <em>La trahison des images </em> depicting a pipe under which are the words <em>Ceci n’est pas une pipe</em>. In the same way, the <code>magrittr</code> package delivers a <em>pipeline</em> or <em>pipe</em> operator <code>%&gt;%</code>which is “not really a pipe”. Whatever you may think about this play on words or the painting itself which inspired this package, what is undeniable is the fact that the <em>pipeline</em> operator makes the code much more readable and as such has quickly become a strong favorite in the R community, especially when programming heavily relies on chaining function calls.</p>
<p>How does the <code>%&gt;%</code> operator work? It’s rather simple - we place it between function calls to designate that the output from the function on the left should be the input for the function on the right. The place where the result from the previous function should go is denoted by the <code>.</code> symbol. We can do this as many times as we want, that is, depending on how many functions calls we “chain”.</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb305-1" title="1"><span class="kw">h</span>(<span class="kw">g</span>(<span class="kw">f</span>(x), y), z, w) <span class="co"># code without the %&gt;% operator</span></a>
<a class="sourceLine" id="cb305-2" title="2"></a>
<a class="sourceLine" id="cb305-3" title="3"><span class="kw">f</span>(x) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">g</span>(., y) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">h</span>(., z, w) <span class="co"># code with the %&gt;% operator</span></a></code></pre></div>
<p>If the result of the previous function the first argument of the next function, then the <code>.</code> symbol (or in effect the whole argument) can be thrown out, so the syntax is even shorter:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb306-1" title="1"><span class="kw">f</span>(x) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">g</span>(y) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">h</span>(z, w) <span class="co"># code without dots</span></a></code></pre></div>
<p>Notice that these function calls are actually formally incorrect because they have an “invisible” first argument. Nevertheless, many R programmers prefer this syntax because it requires less typing and is somewhat more transparent, while the mentioned irregularity does not really matter in practice as long as the developer is aware of the existence of an “invisible” argument.</p>
<p>Now let’s try to reformat our first example with the help of the `%&gt;% ’operator.</p>
<hr />
<p><strong>Assignment 9.2 - operator <code>%&gt;%</code></strong></p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb307-1" title="1"><span class="kw">set.seed</span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb307-2" title="2"></a>
<a class="sourceLine" id="cb307-3" title="3"><span class="co"># solve the first example again using the %&gt;% operator</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb308-1" title="1"><span class="kw">set.seed</span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb308-2" title="2"></a>
<a class="sourceLine" id="cb308-3" title="3"><span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">round</span>(<span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sample</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mean</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">print</span>()</a></code></pre></div>
<pre><code>## [1] 51.123</code></pre>
</div>
<hr />
<p>Note that by reading the above program code, we very easily interpret the meaning of that line of program code, especially when compared to the same command written in the form of a “sandwich”.</p>
<p>We can store the end result of our “chain” of functions in the usual way:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb310-1" title="1">sum1to10 &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> <span class="op">%&gt;%</span><span class="st"> </span>sum <span class="co"># result is stored in variable &#39;sum1to10&#39;</span></a></code></pre></div>
<p>but it may be more visually consistent to use the “inverted” assignment operator: <code>-&gt;</code>.</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb311-1" title="1"><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> <span class="op">%&gt;%</span><span class="st"> </span>sum -&gt;<span class="st"> </span>sum1to10 <span class="co"># works the same as the example above</span></a></code></pre></div>
<p>Note that in situations where the result of the previous function is the only parameter of the following function, we can completely leave out the parentheses (so in the examples above, <code>sum</code>,<code>sum()</code>or<code>sum(.)</code> would all work equally).</p>
<p>Now let’s try to combine the <code>%&gt;%</code> operator and <code>lapply</code> with the example already seen in the section on functions in the<code>apply</code> family.</p>
<hr />
<p><strong>Assignment 9.3 - <code>lapply</code> function and <code>%&gt;%</code> operator</strong></p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb312-1" title="1">l &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">b =</span> <span class="dv">10</span><span class="op">:</span><span class="dv">20</span>, <span class="dt">c =</span> <span class="dv">100</span><span class="op">:</span><span class="dv">200</span>)</a>
<a class="sourceLine" id="cb312-2" title="2"></a>
<a class="sourceLine" id="cb312-3" title="3"><span class="co"># create a matrix which contains the first and last element of each list element</span></a>
<a class="sourceLine" id="cb312-4" title="4"><span class="co"># these elements must be in their own rows</span></a>
<a class="sourceLine" id="cb312-5" title="5"><span class="co"># use functions lapply, unlist and matrix as well as the %&gt;% operator</span></a>
<a class="sourceLine" id="cb312-6" title="6"><span class="co"># save the result in the `res` variable</span></a>
<a class="sourceLine" id="cb312-7" title="7"></a>
<a class="sourceLine" id="cb312-8" title="8">    </a>
<a class="sourceLine" id="cb312-9" title="9"><span class="co"># print &#39;res&#39;</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb313-1" title="1">l &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">b =</span> <span class="dv">10</span><span class="op">:</span><span class="dv">20</span>, <span class="dt">c =</span> <span class="dv">100</span><span class="op">:</span><span class="dv">200</span>)</a>
<a class="sourceLine" id="cb313-2" title="2"></a>
<a class="sourceLine" id="cb313-3" title="3">l <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">lapply</span>(<span class="cf">function</span>(x) <span class="kw">c</span>(x [<span class="dv">1</span>], x [<span class="kw">length</span>(x)])) <span class="op">%&gt;%</span><span class="st"> </span>unlist <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">matrix</span>(<span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">byrow =</span> T) -&gt;<span class="st"> </span>res</a>
<a class="sourceLine" id="cb313-4" title="4">    </a>
<a class="sourceLine" id="cb313-5" title="5">res</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1   10
## [2,]   10   20
## [3,]  100  200</code></pre>
</div>
<hr />
<p>The pipeline operator is very convenient in conjunction with “classic” functions, but we may encounter a problem when we want to combine it with other operators. The cause of the problem is the syntax - the pipeline operator achieves its efficiency by imposing a new, “sequential” syntax, which is not compatible with the syntax imposed by other operators, such as <code>+</code>, <code>%%</code> or <code>[</code>.</p>
<p>If it is really important for us to have a “continuous” function call chain in our code that will contain not only functions but also other operators, then one solution is to use operators as “ordinary” functions. Namely, each operator is actually a function that shares a name with the operator (using the <em>backtick</em> quotation mark which allows the use of symbols as variable names), so the following pairs of expressions are actually equivalent:</p>
<hr />
<p><strong>Example - operators as functions</strong></p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb315-1" title="1"><span class="co"># each pair of instructions is equivalent</span></a>
<a class="sourceLine" id="cb315-2" title="2"><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb315-3" title="3"><span class="st">`</span><span class="dt">+</span><span class="st">`</span>(<span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb315-4" title="4"></a>
<a class="sourceLine" id="cb315-5" title="5"><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb315-6" title="6"><span class="st">`</span><span class="dt">:</span><span class="st">`</span>(<span class="dv">1</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb315-7" title="7"></a>
<a class="sourceLine" id="cb315-8" title="8">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb315-9" title="9"><span class="st">`</span><span class="dt">&lt;-</span><span class="st">`</span>(<span class="st">&quot;x&quot;</span>, <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb315-10" title="10"></a>
<a class="sourceLine" id="cb315-11" title="11">x[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb315-12" title="12"><span class="st">`</span><span class="dt">[</span><span class="st">`</span>(x, <span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] 5
## [1] 5
## [1] 1 2 3 4 5
## [1] 1 2 3 4 5
## [1] 1
## [1] 1</code></pre>
<hr />
<p>Let’s try to use this principle in the next exercise.</p>
<hr />
<p><strong>Assignment 9.4 - combining pipe operator with other operators</strong></p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb317-1" title="1"><span class="kw">set.seed</span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb317-2" title="2"></a>
<a class="sourceLine" id="cb317-3" title="3"><span class="co"># &quot;clean up &quot; the following command with the help of the pipeline operator</span></a>
<a class="sourceLine" id="cb317-4" title="4"><span class="kw">matrix</span>(<span class="kw">table</span>(<span class="kw">sample</span>(<span class="kw">round</span>(<span class="kw">sqrt</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10000</span>, <span class="dv">10000</span>, <span class="dt">replace =</span> T))), <span class="dv">100</span>))[<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>], <span class="dv">3</span>, <span class="dv">3</span>)</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    1
## [2,]    1    3    1
## [3,]    1    1    2</code></pre>
<div class="fold s o">
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb319-1" title="1"><span class="kw">set.seed</span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb319-2" title="2"></a>
<a class="sourceLine" id="cb319-3" title="3"><span class="co"># &quot;clean up &quot; the following command with the help of the pipeline operator</span></a>
<a class="sourceLine" id="cb319-4" title="4"><span class="dv">1</span><span class="op">:</span><span class="dv">10000</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sample</span>(<span class="dv">10000</span>, <span class="dt">replace =</span> T) <span class="op">%&gt;%</span><span class="st"> </span>sqrt <span class="op">%&gt;%</span><span class="st"> </span>round <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb319-5" title="5"><span class="st">  </span><span class="kw">sample</span>(<span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span>table <span class="op">%&gt;%</span><span class="st"> `</span><span class="dt">[</span><span class="st">`</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">matrix</span>(<span class="dv">3</span>, <span class="dv">3</span>)</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    1
## [2,]    1    3    1
## [3,]    1    1    2</code></pre>
</div>
<p>The <code>%&gt;%</code> operator is particularly well suited when dealing with data frames, especially in scenarios when we have a defined data transformation procedure (e.g. filtering some rows, then selecting columns, then grouping the data according to a categorical variable etc.). With the help of this operator, the code itself acts as a readily interpretable representation of our data transformation process which we can easily customize and extend later. Future examples and exercises will often extensively rely on this operator, so we recommend that you master it well before proceeding with the lessons that follow.</p>
<hr />
<div id="tidy-data" class="section level2">
<h2><span class="header-section-number">9.1</span> Tidy data</h2>
<p>It is often stated in various literature that in data analysis, data preparation is often the most time consuming segment of the process. The book <a href="https://books.google.com/books/about/Exploratory_Data_Mining_and_Data_Cleanin.html?id=2OWJVkevamQC&redir_esc=y&hl=en">“Exploratory Data Mining and Data Cleaning”</a> mentions that preparation often requires from 50% to 80% of the total time devoted to analysis. Also, as Hadley Wickham states in his article <a href="http://vita.had.co.nz/papers/tidy-data.pdf"> “Tidy Data”</a>, data preparation is often not just the first step of the analysis, but rather a process that gets repeated as new knowledge is discovered or new data is collected.</p>
<p>Hadley Wickham also introduced the term “tidy data” to refer to the organization of a data in such a way as to facilitate its further processing and analysis. In practice, datasets we get are often not originally intended for the purposes of analysis and as such are not organized in a way that would allow them to be easily used in the analytical process. “Tidy data” is actually a set of principles which may guides us how to “rearrange” data so that its structure matches the standard, expected metadata.</p>
<p>Tidz data principles have similarities with the relational data model, but are defined in a way that is more appropriate for statisticians and developers. These principles can be summarized as follows:</p>
<ul>
<li>the data is organized into a table</li>
<li>each line represents an observation</li>
<li>each column represents a property or variable of that observation</li>
</ul>
<p>Since this may sound too trivial, let’s take a look at what properties Hadley lists as typical of “messy” data:</p>
<ul>
<li>column names are not variable names but rather their values</li>
<li>multiple different variables are stored in the same column</li>
<li>variables are saved in rows</li>
<li>multiple types of different observations are stored in the same table</li>
<li>one type of observation is stored in multiple tables</li>
</ul>
<p>Below, we will give some examples of tables that do not fully conform to the definition of tidy data, and show how to easily “tidy them up”. For this, we will leverage functions provided by the <code>tidyr</code> package.</p>
<hr />
<div id="the-gather-andspread-functions" class="section level3">
<h3><span class="header-section-number">9.1.1</span> The <code>gather</code> and<code>spread</code> functions</h3>
<p>The workbook which corresponds to this leeson should have a file called <code>students.csv</code>. Let’s load it into our work environment. Since the file is stored using UTF-8 encoding (since it contains Croatian letters), you can also add a <code>fileEncoding ="UTF-8"</code> parameter to the <code>read.csv</code> command to get the special characters correctly printed.</p>
<hr />
<p><strong>Assignment 9.5 - <code>students</code> data set</strong></p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb321-1" title="1"><span class="co"># load data from `students.csv` file into` students` variable</span></a>
<a class="sourceLine" id="cb321-2" title="2"><span class="co"># don&#39;t forget the `stringsAsFactors` parameter!</span></a>
<a class="sourceLine" id="cb321-3" title="3"></a>
<a class="sourceLine" id="cb321-4" title="4"><span class="co"># familiarize yourself with the data using standard functions for this purpose</span></a>
<a class="sourceLine" id="cb321-5" title="5"><span class="co"># (names, sapply/class, str, head, summary ...)</span></a>
<a class="sourceLine" id="cb321-6" title="6"><span class="co"># in the following examples for this process, we will use the phrase &quot;briefly explore the data frame&quot; </span></a>
<a class="sourceLine" id="cb321-7" title="7"><span class="co"># as a shortcut for the above process</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb322-1" title="1">students &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;students.csv&quot;</span>, <span class="dt">fileEncoding =</span><span class="st">&quot;UTF-8&quot;</span>, <span class="dt">stringsAsFactors =</span> F)</a>
<a class="sourceLine" id="cb322-2" title="2"></a>
<a class="sourceLine" id="cb322-3" title="3"><span class="kw">str</span>(students)</a>
<a class="sourceLine" id="cb322-4" title="4"><span class="kw">head</span>(students)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    27 obs. of  10 variables:
##  $ JMBAG        : int  1341 1342 1343 1344 1345 1346 1347 1348 1349 1350 ...
##  $ Surname      : chr  &quot;Anic&quot; &quot;Babic&quot; &quot;Crnoja&quot; &quot;Crnjac&quot; ...
##  $ Name         : chr  &quot;Iva&quot; &quot;Josip&quot; &quot;Petra&quot; &quot;Lucija&quot; ...
##  $ Math.1       : chr  &quot;2&quot; &quot;5&quot; &quot;4&quot; &quot;2&quot; ...
##  $ Physics.1    : chr  &quot;2&quot; &quot;3&quot; &quot;3&quot; &quot;5&quot; ...
##  $ Programming  : chr  &quot;NULL&quot; &quot;4&quot; &quot;4&quot; &quot;2&quot; ...
##  $ Electronics  : chr  &quot;NULL&quot; &quot;3&quot; &quot;2&quot; &quot;2&quot; ...
##  $ Digital.Logic: chr  &quot;4&quot; &quot;NULL&quot; &quot;3&quot; &quot;3&quot; ...
##  $ Math.2       : chr  &quot;2&quot; &quot;5&quot; &quot;4&quot; &quot;3&quot; ...
##  $ Algorithms.1 : chr  &quot;2&quot; &quot;5&quot; &quot;3&quot; &quot;4&quot; ...
##   JMBAG Surname   Name Math.1 Physics.1 Programming Electronics
## 1  1341    Anic    Iva      2         2        NULL        NULL
## 2  1342   Babic  Josip      5         3           4           3
## 3  1343  Crnoja  Petra      4         3           4           2
## 4  1344  Crnjac Lucija      2         5           2           2
## 5  1345   Dizla  Stipe   NULL         4           3           5
## 6  1346   Ermic   Igor   NULL         3        NULL           5
##   Digital.Logic Math.2 Algorithms.1
## 1             4      2            2
## 2          NULL      5            5
## 3             3      4            3
## 4             3      3            4
## 5             2      2            2
## 6             5      5            5</code></pre>
</div>
<hr />
<p>Note that this dataset has a lot of missing values that are written as <code>NULL</code>. Because R does not recognize this as a missing value, it loaded the data as character strings (or as factors if we forgot the <code>stringsAsFactors</code> parameter). Because the columns that relate to the ratings are obviously numeric, we can easily convert them to such using the <code>as.numeric ()</code> (or <code>as.numeric(as.character())</code> command if they are factors!). But there is a simpler way - if we know how the missing value is represented in the dataset, we can directly embed it in the <code>read.csv</code> command using the <code>na.strings</code> parameter.</p>
<hr />
<p><strong>Assignment 9.6 - using the <code>na.strings</code> parameter</strong></p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb324-1" title="1"><span class="co"># reload the data from the `students.csv` file into the` students` variable</span></a>
<a class="sourceLine" id="cb324-2" title="2"><span class="co"># add the `na.strings` parameter to the` read.csv` command with a character string representing NA</span></a>
<a class="sourceLine" id="cb324-3" title="3"></a>
<a class="sourceLine" id="cb324-4" title="4"></a>
<a class="sourceLine" id="cb324-5" title="5"><span class="co"># briefly explore the `students` data frame</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb325-1" title="1">students &lt;-<span class="st"> </span><span class="kw">read.csv</span> (<span class="st">&quot;students.csv&quot;</span>, <span class="dt">fileEncoding =</span> <span class="st">&quot;UTF-8&quot;</span>, <span class="dt">stringsAsFactors =</span> F, <span class="dt">na.strings =</span> <span class="st">&quot;NULL&quot;</span>)</a>
<a class="sourceLine" id="cb325-2" title="2"></a>
<a class="sourceLine" id="cb325-3" title="3"></a>
<a class="sourceLine" id="cb325-4" title="4"><span class="kw">str</span>(students)</a>
<a class="sourceLine" id="cb325-5" title="5"><span class="kw">head</span>(students)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    27 obs. of  10 variables:
##  $ JMBAG        : int  1341 1342 1343 1344 1345 1346 1347 1348 1349 1350 ...
##  $ Surname      : chr  &quot;Anic&quot; &quot;Babic&quot; &quot;Crnoja&quot; &quot;Crnjac&quot; ...
##  $ Name         : chr  &quot;Iva&quot; &quot;Josip&quot; &quot;Petra&quot; &quot;Lucija&quot; ...
##  $ Math.1       : int  2 5 4 2 NA NA NA 3 3 4 ...
##  $ Physics.1    : int  2 3 3 5 4 3 3 4 2 2 ...
##  $ Programming  : int  NA 4 4 2 3 NA 3 3 3 4 ...
##  $ Electronics  : int  NA 3 2 2 5 5 3 4 2 2 ...
##  $ Digital.Logic: int  4 NA 3 3 2 5 2 4 3 5 ...
##  $ Math.2       : int  2 5 4 3 2 5 2 5 NA 4 ...
##  $ Algorithms.1 : int  2 5 3 4 2 5 5 4 3 2 ...
##   JMBAG Surname   Name Math.1 Physics.1 Programming Electronics
## 1  1341    Anic    Iva      2         2          NA          NA
## 2  1342   Babic  Josip      5         3           4           3
## 3  1343  Crnoja  Petra      4         3           4           2
## 4  1344  Crnjac Lucija      2         5           2           2
## 5  1345   Dizla  Stipe     NA         4           3           5
## 6  1346   Ermic   Igor     NA         3          NA           5
##   Digital.Logic Math.2 Algorithms.1
## 1             4      2            2
## 2            NA      5            5
## 3             3      4            3
## 4             3      3            4
## 5             2      2            2
## 6             5      5            5</code></pre>
</div>
<hr />
<p>We see that the columns are now of the appropriate type - but still the data frame does not fully fit the definition of “tidy data”. The names of the columns are actually the categories of the variable <code>course</code> and the ‘observation’ in this table is represented by the student, even though a more logical granularity would be to have each grade as a specific observation. Now, adding a new grade from a course is only possible by adding a new column, making sure to add grades for <em>all</em> students, which would inevitably mean immediately entering a lot of <code>NA</code> values for all student/course combinations where no grade yet exists (and maybe never will, if the student never takes that course at all).</p>
<p>Let’s try to reorganize the table so each row represents “a grade student received in a particular course”. Consider what steps should be taken to create such a table. We need to:</p>
<ul>
<li>create a categorical variable <code>course</code> which would have the names of all the courses (currently spread over column names)</li>
<li>create all student/course combinations that make sense (i.e. have a grade assigned to them)</li>
<li>fill in the combinations with the corresponding grade value</li>
</ul>
<p>This process is not impossible, but it does require a lot of jumping through hoops to redesign the data frame. To simplify this process, we can use the <code>gather</code> function from the<code>tidyr</code> package, which performs the exact procedure we described above: it “gathers” columns into a single variable and then populates the valuesof that variable with the existing column/row combinations. The function signature looks like this:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb327-1" title="1"><span class="kw">gather</span>(data, key, value, ..., <span class="dt">na.rm =</span> <span class="ot">FALSE</span>, <span class="dt">convert =</span> <span class="ot">FALSE</span>, <span class="dt">factor_key =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>You can get a detailed description of the function by calling <code>?gather</code>, but here we will just briefly explain some of the parameters:</p>
<ul>
<li><code>data</code> obviously represents our data frame</li>
<li><code>key</code> represents the name of the new column - the categorical variable we want to create (in our case <code>course</code>); this function does not require that the column name be quoted</li>
<li><code>value</code> represents the name of the new column (variable) which will hold values with values (in our case <code>grade</code>)</li>
<li><code>...</code> represents the set of columns we “gather”; we can specify column names separated by commas (quotes are also not required), use the syntax <code>first_column:last_column</code>, or even just name the columns we do NOT want to gather by prefacing them with the <code>-</code> sign</li>
<li><code>na.rm</code> describes whether we want to omit observations with <code>NA</code> values</li>
<li><code>convert</code> will convert the data if we deem it necessary</li>
<li><code>factor_key</code> asks us if we want to factorize the new variable we are creating</li>
</ul>
<p>Let’s try out this function with our untidy data frame.</p>
<hr />
<p><strong>Assignment 9.7 - <code>gather</code> function</strong></p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb328-1" title="1"><span class="co"># create a &#39;grades&#39; data frame by using the &#39;gather&#39; function on the &#39;students&#39; data frame</span></a>
<a class="sourceLine" id="cb328-2" title="2"></a>
<a class="sourceLine" id="cb328-3" title="3"></a>
<a class="sourceLine" id="cb328-4" title="4"><span class="co"># briefly explore the `grades` data frame</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb329-1" title="1"><span class="co">#library(tidyr)  # if necessary</span></a>
<a class="sourceLine" id="cb329-2" title="2">grades &lt;-<span class="st"> </span><span class="kw">gather</span>(students, course, grade, Math<span class="fl">.1</span><span class="op">:</span>Algorithms<span class="fl">.1</span>, <span class="dt">na.rm =</span> T, <span class="dt">factor_key =</span> T)</a>
<a class="sourceLine" id="cb329-3" title="3"></a>
<a class="sourceLine" id="cb329-4" title="4"><span class="kw">str</span>(grades)</a>
<a class="sourceLine" id="cb329-5" title="5"><span class="kw">head</span>(grades)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    168 obs. of  5 variables:
##  $ JMBAG  : int  1341 1342 1343 1344 1348 1349 1350 1351 1352 1353 ...
##  $ Surname: chr  &quot;Anic&quot; &quot;Babic&quot; &quot;Crnoja&quot; &quot;Crnjac&quot; ...
##  $ Name   : chr  &quot;Iva&quot; &quot;Josip&quot; &quot;Petra&quot; &quot;Lucija&quot; ...
##  $ course : Factor w/ 7 levels &quot;Math.1&quot;,&quot;Physics.1&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ grade  : int  2 5 4 2 3 3 4 2 4 5 ...
##   JMBAG Surname   Name course grade
## 1  1341    Anic    Iva Math.1     2
## 2  1342   Babic  Josip Math.1     5
## 3  1343  Crnoja  Petra Math.1     4
## 4  1344  Crnjac Lucija Math.1     2
## 8  1348 Grubiša   Ivan Math.1     3
## 9  1349   Gobac  Davor Math.1     3</code></pre>
</div>
<hr />
<p>The <code>spread</code> function does the inverse job from the <code>gather</code> function. It will “expand” data from a combination of a categorical column and a corresponding “value” column so the categories become column names, and the values from the value column get appropriately “spread” over the corresponding columns.</p>
<p>The function signature looks like this:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb331-1" title="1"><span class="kw">spread</span>(data, key, value, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">convert =</span> <span class="ot">FALSE</span>, <span class="dt">drop =</span> <span class="ot">TRUE</span>, <span class="dt">sep =</span> <span class="ot">NULL</span>)</a></code></pre></div>
<p>Documentation of this function is easily retrieved by using <code>?spread</code>, and some elements can already be easily identified by using the knowledge of how the <code>gather</code> function works. Some of the parameters which might be useful to us will be described bellow:</p>
<ul>
<li><code>fill</code> describes what value to put in “non-existent” combinations after the spread is performed</li>
<li><code>drop</code> describes whether columns for non-existent categories should be worked (if we were spreading a factor column and not or levels were represented)</li>
<li><code>sep</code> allows us to have a column name which is not only a category value but a combination of the name of an category column we are spreading and the category level (with a defined separator)</li>
</ul>
<p>Let’s try to “reconstruct” the original <code>students</code> data frame with this command.</p>
<hr />
<p><strong>Assignment 9.8 - <code>spread</code> function</strong></p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb332-1" title="1"><span class="co"># &quot;spread&quot; the &#39;grades&#39; data frame to reconstruct the</span></a>
<a class="sourceLine" id="cb332-2" title="2"><span class="co"># original data frame</span></a>
<a class="sourceLine" id="cb332-3" title="3"><span class="co"># store the results in a `students2` data frame</span></a>
<a class="sourceLine" id="cb332-4" title="4"></a>
<a class="sourceLine" id="cb332-5" title="5"><span class="co"># compare `students` and` students2` data frames</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb333-1" title="1">students2 &lt;-<span class="st"> </span><span class="kw">spread</span>(grades, course, grade)</a>
<a class="sourceLine" id="cb333-2" title="2"></a>
<a class="sourceLine" id="cb333-3" title="3"><span class="kw">head</span>(students)</a>
<a class="sourceLine" id="cb333-4" title="4"><span class="kw">head</span>(students2)</a>
<a class="sourceLine" id="cb333-5" title="5"><span class="kw">str</span>(students)</a>
<a class="sourceLine" id="cb333-6" title="6"><span class="kw">str</span>(students2)</a></code></pre></div>
<pre><code>##   JMBAG Surname   Name Math.1 Physics.1 Programming Electronics
## 1  1341    Anic    Iva      2         2          NA          NA
## 2  1342   Babic  Josip      5         3           4           3
## 3  1343  Crnoja  Petra      4         3           4           2
## 4  1344  Crnjac Lucija      2         5           2           2
## 5  1345   Dizla  Stipe     NA         4           3           5
## 6  1346   Ermic   Igor     NA         3          NA           5
##   Digital.Logic Math.2 Algorithms.1
## 1             4      2            2
## 2            NA      5            5
## 3             3      4            3
## 4             3      3            4
## 5             2      2            2
## 6             5      5            5
##   JMBAG Surname   Name Math.1 Physics.1 Programming Electronics
## 1  1341    Anic    Iva      2         2          NA          NA
## 2  1342   Babic  Josip      5         3           4           3
## 3  1343  Crnoja  Petra      4         3           4           2
## 4  1344  Crnjac Lucija      2         5           2           2
## 5  1345   Dizla  Stipe     NA         4           3           5
## 6  1346   Ermic   Igor     NA         3          NA           5
##   Digital.Logic Math.2 Algorithms.1
## 1             4      2            2
## 2            NA      5            5
## 3             3      4            3
## 4             3      3            4
## 5             2      2            2
## 6             5      5            5
## &#39;data.frame&#39;:    27 obs. of  10 variables:
##  $ JMBAG        : int  1341 1342 1343 1344 1345 1346 1347 1348 1349 1350 ...
##  $ Surname      : chr  &quot;Anic&quot; &quot;Babic&quot; &quot;Crnoja&quot; &quot;Crnjac&quot; ...
##  $ Name         : chr  &quot;Iva&quot; &quot;Josip&quot; &quot;Petra&quot; &quot;Lucija&quot; ...
##  $ Math.1       : int  2 5 4 2 NA NA NA 3 3 4 ...
##  $ Physics.1    : int  2 3 3 5 4 3 3 4 2 2 ...
##  $ Programming  : int  NA 4 4 2 3 NA 3 3 3 4 ...
##  $ Electronics  : int  NA 3 2 2 5 5 3 4 2 2 ...
##  $ Digital.Logic: int  4 NA 3 3 2 5 2 4 3 5 ...
##  $ Math.2       : int  2 5 4 3 2 5 2 5 NA 4 ...
##  $ Algorithms.1 : int  2 5 3 4 2 5 5 4 3 2 ...
## &#39;data.frame&#39;:    27 obs. of  10 variables:
##  $ JMBAG        : int  1341 1342 1343 1344 1345 1346 1347 1348 1349 1350 ...
##  $ Surname      : chr  &quot;Anic&quot; &quot;Babic&quot; &quot;Crnoja&quot; &quot;Crnjac&quot; ...
##  $ Name         : chr  &quot;Iva&quot; &quot;Josip&quot; &quot;Petra&quot; &quot;Lucija&quot; ...
##  $ Math.1       : int  2 5 4 2 NA NA NA 3 3 4 ...
##  $ Physics.1    : int  2 3 3 5 4 3 3 4 2 2 ...
##  $ Programming  : int  NA 4 4 2 3 NA 3 3 3 4 ...
##  $ Electronics  : int  NA 3 2 2 5 5 3 4 2 2 ...
##  $ Digital.Logic: int  4 NA 3 3 2 5 2 4 3 5 ...
##  $ Math.2       : int  2 5 4 3 2 5 2 5 NA 4 ...
##  $ Algorithms.1 : int  2 5 3 4 2 5 5 4 3 2 ...</code></pre>
</div>
<hr />
<p>In the previous example, we demonstrated the inverse functionality of the <code>gather</code> and<code>spread</code> functions, but our usage <code>spread</code> did not serve to tidy up the data, it just enabled us to revert to the original data frame. Let us now look at an example where <code>spread</code> is sed to actually make the data tidier.</p>
<p>Let’s retrieve data from the <code>cars.csv</code> file that stores the technical characteristics of specific cars.</p>
<hr />
<p><strong>Assignment 9.9 - <code>cars</code> data set</strong></p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb335-1" title="1"><span class="co">#load the `cars.csv` file into a data frame called `cars`</span></a>
<a class="sourceLine" id="cb335-2" title="2"></a>
<a class="sourceLine" id="cb335-3" title="3"><span class="co">#briefly explore the `cars` data frame</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb336-1" title="1">cars &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;cars.csv&quot;</span>, <span class="dt">fileEncoding =</span> <span class="st">&quot;UTF-8&quot;</span>, <span class="dt">stringsAsFactors =</span> F)</a>
<a class="sourceLine" id="cb336-2" title="2"></a>
<a class="sourceLine" id="cb336-3" title="3"><span class="kw">str</span>(cars)</a>
<a class="sourceLine" id="cb336-4" title="4"><span class="kw">head</span>(cars)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    18 obs. of  3 variables:
##  $ Car.model               : chr  &quot;Opel Astra&quot; &quot;Opel Astra&quot; &quot;Opel Astra&quot; &quot;Opel Astra&quot; ...
##  $ Technical.Characteristic: chr  &quot;Cylinders&quot; &quot;HP&quot; &quot;Length m&quot; &quot;Mass kg&quot; ...
##  $ Value                   : num  4 125 4.27 1285 4 ...
##    Car.model Technical.Characteristic    Value
## 1 Opel Astra                Cylinders    4.000
## 2 Opel Astra                       HP  125.000
## 3 Opel Astra                 Length m    4.267
## 4 Opel Astra                  Mass kg 1285.000
## 5    Audi A4                Cylinders    4.000
## 6    Audi A4                       HP  136.000</code></pre>
</div>
<hr />
<p>This table clearly violates the principles of tidy data which dictate that only one type of variable should be stored in a column - the technical characteristics of the car are placed in a unique column called <code>Technical.Characteristic</code> and in the <code>value</code> column holds very heterogenous values (we have mass in kilograms, length in meters, etc.).</p>
<p>Try tidying up this data frame with the <code>spread</code> function.</p>
<hr />
<p><strong>Assignment 9.10 - <code>spread</code> function (2)</strong></p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb338-1" title="1"><span class="co"># create an `cars2` data frame which will have </span></a>
<a class="sourceLine" id="cb338-2" title="2"><span class="co"># the tidied data from the `cars` data frame</span></a>
<a class="sourceLine" id="cb338-3" title="3"></a>
<a class="sourceLine" id="cb338-4" title="4"><span class="co"># briefly explore the `cars2` dat frame</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb339-1" title="1">cars2 &lt;-<span class="st"> </span><span class="kw">spread</span> (cars, Technical.Characteristic, Value)</a>
<a class="sourceLine" id="cb339-2" title="2"></a>
<a class="sourceLine" id="cb339-3" title="3"><span class="kw">str</span>(cars2)</a>
<a class="sourceLine" id="cb339-4" title="4"><span class="kw">head</span>(cars2)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    5 obs. of  6 variables:
##  $ Car.model: chr  &quot;Audi A4&quot; &quot;Citroen C6&quot; &quot;Fiat 500L&quot; &quot;Opel Astra&quot; ...
##  $ Cylinders: num  4 6 2 4 4
##  $ HP       : num  136 215 103 125 110
##  $ Length m : num  4.7 NA NA 4.27 4.56
##  $ Mass kg  : num  1470 1816 1260 1285 NA
##  $ Valves   : num  NA NA NA NA 16
##              Car.model Cylinders  HP Length m Mass kg Valves
## 1              Audi A4         4 136    4.703    1470     NA
## 2           Citroen C6         6 215       NA    1816     NA
## 3            Fiat 500L         2 103       NA    1260     NA
## 4           Opel Astra         4 125    4.267    1285     NA
## 5 Renault Grand Scenic         4 110    4.560      NA     16</code></pre>
</div>
<hr />
<p>The <code>gather</code> and<code>spread</code> commands are not only used for ‘messy’ data. They can be very useful when converting so-called “wide” data into “long” data. Let’s show this on the example of shopping cart data.</p>
<p>Shopping cart data (or “consumer basket data”) is a record of items purchased by a customer during their visit to the store (be it a virtual store or a real retail outlet). If we write consumer basket information in a “wide” format, then we organize the information so that the columns represent individual items and the rows represent one successful “visit” to the story (or simply “invoice”). Here, a value of <code>1</code> means that the item ultimately ended up in the cart, while <code>0</code> means it was not present there (alternative way would be to use numbers over <code>1</code> to denote the exact quantity). This kind of representation is suitable for different types of analysis, but it is not economical - if the store has a large number of items on offer, data will often have long rows mostly filled with “zeros”. The “long” format on the other hand simply puts a combination of a shopping cart identifier (or account number) and the name (or code) of the item purchased in each row. Such a record will have significantly more rows, but it is much more suitable in cases where the number of items in the range is far greater than the number of items in the average basket.</p>
<hr />
<p><strong>Assignment 9.11 - Consumer basket data</strong></p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb341-1" title="1"><span class="co"># Load data from the `ConsumersBasket.csv` file into the &#39;invoices&#39; data frame</span></a>
<a class="sourceLine" id="cb341-2" title="2"></a>
<a class="sourceLine" id="cb341-3" title="3"><span class="co"># briefly explore the `invoioces` data frame</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb342-1" title="1">invoices &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;ConsumerBasket.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> F, <span class="dt">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</a>
<a class="sourceLine" id="cb342-2" title="2"></a>
<a class="sourceLine" id="cb342-3" title="3"><span class="kw">str</span>(invoices)</a>
<a class="sourceLine" id="cb342-4" title="4"><span class="kw">head</span>(invoices)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    104 obs. of  21 variables:
##  $ invoiceID           : int  15671 15672 15673 15674 15675 15676 15677 15678 15679 15680 ...
##  $ Coca.cola.2l        : int  0 1 1 0 1 0 0 0 0 0 ...
##  $ Chips.150g          : int  0 0 1 0 0 0 0 1 0 0 ...
##  $ Nutella.400.g       : int  0 1 0 0 1 0 0 0 0 0 ...
##  $ Light.Beer          : int  0 1 0 0 0 0 0 0 0 1 ...
##  $ Dark.Beer           : int  1 0 0 1 0 0 0 0 0 1 ...
##  $ Fabric.Softener.1.5l: int  0 0 0 0 0 0 0 1 0 1 ...
##  $ Water.2l            : int  0 0 1 0 0 0 0 0 1 1 ...
##  $ Oranges             : int  0 0 0 1 1 0 0 0 1 1 ...
##  $ Apples              : int  1 0 0 1 0 0 0 0 0 0 ...
##  $ Pineapples          : int  0 0 1 0 0 0 0 1 1 1 ...
##  $ Napkins             : int  0 0 0 0 1 1 0 0 0 0 ...
##  $ Patte               : int  0 0 1 1 0 0 0 0 0 1 ...
##  $ Ketchup             : int  1 0 0 1 0 0 0 0 0 1 ...
##  $ Mustard             : int  1 0 0 0 0 0 0 1 0 0 ...
##  $ Milk.0.5l           : int  0 1 0 1 1 0 0 0 0 0 ...
##  $ Sour.Cream          : int  0 1 0 0 0 0 1 0 0 1 ...
##  $ Feta.cheese         : int  0 0 0 1 0 0 0 0 0 0 ...
##  $ Sardines            : int  0 0 0 0 0 0 0 0 0 1 ...
##  $ Tuna.patte          : int  1 1 1 0 0 1 0 0 0 0 ...
##  $ Nescaffe            : int  0 0 1 0 0 0 0 0 1 0 ...
##   invoiceID Coca.cola.2l Chips.150g Nutella.400.g Light.Beer Dark.Beer
## 1     15671            0          0             0          0         1
## 2     15672            1          0             1          1         0
## 3     15673            1          1             0          0         0
## 4     15674            0          0             0          0         1
## 5     15675            1          0             1          0         0
## 6     15676            0          0             0          0         0
##   Fabric.Softener.1.5l Water.2l Oranges Apples Pineapples Napkins Patte
## 1                    0        0       0      1          0       0     0
## 2                    0        0       0      0          0       0     0
## 3                    0        1       0      0          1       0     1
## 4                    0        0       1      1          0       0     1
## 5                    0        0       1      0          0       1     0
## 6                    0        0       0      0          0       1     0
##   Ketchup Mustard Milk.0.5l Sour.Cream Feta.cheese Sardines Tuna.patte
## 1       1       1         0          0           0        0          1
## 2       0       0         1          1           0        0          1
## 3       0       0         0          0           0        0          1
## 4       1       0         1          0           1        0          0
## 5       0       0         1          0           0        0          0
## 6       0       0         0          0           0        0          1
##   Nescaffe
## 1        0
## 2        0
## 3        1
## 4        0
## 5        0
## 6        0</code></pre>
</div>
<hr />
<p><strong>Assignment 9.12 - converting data frame to a ‘long’ format</strong></p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb344-1" title="1"><span class="co"># convert `invoices` data frame to a &quot;long&quot; format</span></a>
<a class="sourceLine" id="cb344-2" title="2"><span class="co"># each row needs to have invoiceID and itemName </span></a>
<a class="sourceLine" id="cb344-3" title="3"><span class="co"># only bought items need to be present</span></a>
<a class="sourceLine" id="cb344-4" title="4"><span class="co"># name the new data frame `invoicesLong`</span></a>
<a class="sourceLine" id="cb344-5" title="5"></a>
<a class="sourceLine" id="cb344-6" title="6"><span class="co"># store the new data frame in a new CSV file</span></a>
<a class="sourceLine" id="cb344-7" title="7"><span class="co"># called &quot;ConsumerBasketLong.csv&quot;</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb345-1" title="1">invoicesLong &lt;-<span class="st"> </span><span class="kw">gather</span>(invoices, item, value, <span class="op">-</span>invoiceID)</a>
<a class="sourceLine" id="cb345-2" title="2">invoicesLong  &lt;-<span class="st"> </span>invoicesLong[invoicesLong<span class="op">$</span>value <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb345-3" title="3">invoicesLong &lt;-<span class="st"> </span>invoicesLong[<span class="kw">order</span>(invoicesLong<span class="op">$</span>invoiceID),]</a>
<a class="sourceLine" id="cb345-4" title="4"><span class="kw">head</span>(invoicesLong)</a>
<a class="sourceLine" id="cb345-5" title="5"><span class="kw">write.csv</span>(invoicesLong, <span class="dt">file =</span> <span class="st">&#39;ConsumerBasketLong.csv&#39;</span>, <span class="dt">row.names =</span> F)</a></code></pre></div>
<pre><code>##      invoiceID         item
## 417      15671    Dark.Beer
## 833      15671       Apples
## 1249     15671      Ketchup
## 1353     15671      Mustard
## 1873     15671   Tuna.patte
## 2        15672 Coca.cola.2l</code></pre>
</div>
<hr />
<p><strong>Assignment 9.13 - converting data frame to a ‘wide’ format</strong></p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb347-1" title="1"><span class="co"># try formatting the &quot;long&quot; format back to &quot;wide&quot;</span></a>
<a class="sourceLine" id="cb347-2" title="2"></a>
<a class="sourceLine" id="cb347-3" title="3"><span class="co"># store the new data frame in a new CSV file</span></a>
<a class="sourceLine" id="cb347-4" title="4"><span class="co"># called &quot;ConsumerBasketWide.csv&quot;</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb348-1" title="1">invoicesWide &lt;-<span class="st"> </span>invoicesLong</a>
<a class="sourceLine" id="cb348-2" title="2">invoicesWide<span class="op">$</span>value &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb348-3" title="3">invoicesWide &lt;-<span class="st"> </span><span class="kw">spread</span>(invoicesWide, item, value, <span class="dt">fill =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb348-4" title="4"><span class="kw">write.csv</span>(invoicesWide, <span class="dt">file =</span> <span class="st">&#39;ConsumerBasketWide.csv&#39;</span>, <span class="dt">row.names =</span> F)</a></code></pre></div>
</div>
<hr />
</div>
<div id="the-separate-and-unite-functions" class="section level3">
<h3><span class="header-section-number">9.1.2</span> The <code>separate</code> and <code>unite</code> functions</h3>
<hr />
<p>The <code>tidyr</code> package has a number of other useful features for efficient transformation and clean up of our data frames, and here we will address two more commonly used onesm called <code>separate</code> and <code>unite</code>.</p>
<p>The <code>separate</code> function is useful when a column has “complex” values that we want to separate into two or more columns.</p>
<p><strong>Assignment 9.14 - <code>Deparments</code> data set</strong></p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb349-1" title="1"><span class="co"># read data from the `departments.csv` file into the` departments` variable</span></a>
<a class="sourceLine" id="cb349-2" title="2"></a>
<a class="sourceLine" id="cb349-3" title="3"><span class="co"># briefly explore the `departments` data frame</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb350-1" title="1">departments &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;departments.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> F)</a>
<a class="sourceLine" id="cb350-2" title="2"></a>
<a class="sourceLine" id="cb350-3" title="3"><span class="kw">str</span>(departments)</a>
<a class="sourceLine" id="cb350-4" title="4"><span class="kw">head</span>(departments)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    28 obs. of  4 variables:
##  $ Department: chr  &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ...
##  $ Quarter   : chr  &quot;Q1-2015&quot; &quot;Q2-2015&quot; &quot;Q3-2015&quot; &quot;Q4-2015&quot; ...
##  $ RevenuesKn: num  12416 224290 10644 191229 258697 ...
##  $ ExpensesKn: num  23101 63886 35468 12249 61515 ...
##   Department Quarter RevenuesKn ExpensesKn
## 1          A Q1-2015    12416.2    23100.5
## 2          A Q2-2015   224290.1    63886.1
## 3          A Q3-2015    10643.7    35467.8
## 4          A Q4-2015   191229.3    12249.1
## 5          A Q1-2016   258697.4    61514.6
## 6          A Q2-2016   121865.3    46092.6</code></pre>
</div>
<hr />
<p>This table shows the revenues and expenditures of a company departments by quarter. Quarters are currently stored in a complex variable called <code>Quarter</code> consisting of identifiers of the annual quarter (<code>Q1</code>, <code>Q2</code>, <code>Q3</code> or <code>Q4</code>) and year. For analysis purposes, it would probably be more convenient to break this down into two columns - <code>Quarter</code> (which would store only the quarter identifier) and <code>Year</code>.</p>
<p>The <code>tidyr</code> package for this purpose offers a <code>separate</code> function with the following signature:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb352-1" title="1"><span class="kw">separate</span>(data, col, into, <span class="dt">sep =</span> <span class="st">&quot;[^[:alnum:]] +&quot;</span>, <span class="dt">remove =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb352-2" title="2">  <span class="dt">convert =</span> <span class="ot">FALSE</span>, <span class="dt">extra =</span> <span class="st">&quot;warn&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;warn&quot;</span>, ...)</a></code></pre></div>
<p>The complete documentation of the function can be viewed with the command <code>?separate</code> while here we explain some important parameters:</p>
<ul>
<li><code>col</code> - column to be separated (no quotes required)</li>
<li><code>into</code> - names of new columns (character vector is recommended)</li>
<li><code>sep</code> - value separator in original column, <em>default</em> value is actually a regular expression for “something that is not an alphanumeric character”</li>
<li><code>remove</code> - describes whether or not to remove the original column</li>
</ul>
<p>Let’s try to apply this function to the <code>departments</code> data frame.</p>
<hr />
<p><strong>Assignment 9.15 - the <code>separate</code> function</strong></p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb353-1" title="1"><span class="co"># Separate the `Quarter` column into the` Quarter` and `Year` columns while removing the original column</span></a>
<a class="sourceLine" id="cb353-2" title="2"><span class="co"># save the resulting data grame to the `departments2` variable</span></a>
<a class="sourceLine" id="cb353-3" title="3"><span class="co"># try to do everything within one command with the help of the `%&gt;%` operator</span></a>
<a class="sourceLine" id="cb353-4" title="4"></a>
<a class="sourceLine" id="cb353-5" title="5"></a>
<a class="sourceLine" id="cb353-6" title="6"><span class="co"># briefly explore the `departments2` data frame</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb354-1" title="1">departments <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(Quarter, <span class="kw">c</span>(<span class="st">&quot;Quarter&quot;</span>, <span class="st">&quot;Year&quot;</span>), <span class="st">&quot;-&quot;</span>) -&gt;<span class="st"> </span>departments2</a>
<a class="sourceLine" id="cb354-2" title="2"></a>
<a class="sourceLine" id="cb354-3" title="3"><span class="kw">str</span>(departments2)</a>
<a class="sourceLine" id="cb354-4" title="4"><span class="kw">head</span>(departments2)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    28 obs. of  5 variables:
##  $ Department: chr  &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ...
##  $ Quarter   : chr  &quot;Q1&quot; &quot;Q2&quot; &quot;Q3&quot; &quot;Q4&quot; ...
##  $ Year      : chr  &quot;2015&quot; &quot;2015&quot; &quot;2015&quot; &quot;2015&quot; ...
##  $ RevenuesKn: num  12416 224290 10644 191229 258697 ...
##  $ ExpensesKn: num  23101 63886 35468 12249 61515 ...
##   Department Quarter Year RevenuesKn ExpensesKn
## 1          A      Q1 2015    12416.2    23100.5
## 2          A      Q2 2015   224290.1    63886.1
## 3          A      Q3 2015    10643.7    35467.8
## 4          A      Q4 2015   191229.3    12249.1
## 5          A      Q1 2016   258697.4    61514.6
## 6          A      Q2 2016   121865.3    46092.6</code></pre>
</div>
<hr />
<p>Note that the <code>Quarter</code> and<code>Year</code> columns are actually categorical variables so it would probably be a good idea to factorize them if we are to use them in further analysis.</p>
<p>The <code>separate</code> function is often used to disassemble dates (eg <code>2016-10-28</code> into the year, month and day), but in such situations it is recommended to use the <code>lubridate</code> package created precisely for easier date management. We will introduce this package in one of the following chapters.</p>
<hr />
<p>Finally, let’s learn the <code>unite</code> function, which is somewhat less commonly used and is actually an inverse of the <code>separate</code> function. The <code>unite</code> function signature is:</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb356-1" title="1"><span class="kw">unite</span>(data, col, ..., <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>, <span class="dt">remove =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>In this case, too, we can easily retrieve the documentation for <code>unite</code>, and will just briefly describe the parameters that potentially require additional explanation:</p>
<ul>
<li><code>col</code> - new column name (quotes not required)</li>
<li><code>...</code> - the names of the columns we merge - we don’t have to use quotation marks, and if there are many columns we can use the same syntax to select as with the <code>gather</code> function</li>
</ul>
<p>Let’s try using this function on the <code>departments2</code> data frame.</p>
<hr />
<p><strong>Assignment 9.16 - the <code>unite</code> function</strong></p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb357-1" title="1"><span class="co"># merge the `Quarter` and` Year` columns from the `departments2` table into a unique` Quarter` column</span></a>
<a class="sourceLine" id="cb357-2" title="2"><span class="co"># remove the previous `Quarter` and `Year` columns</span></a>
<a class="sourceLine" id="cb357-3" title="3"><span class="co"># use `-` as a separator</span></a>
<a class="sourceLine" id="cb357-4" title="4"><span class="co"># save the result to the `departments3` variable</span></a>
<a class="sourceLine" id="cb357-5" title="5"><span class="co"># use the `%&gt;% &#39;operator to put everything in one line</span></a>
<a class="sourceLine" id="cb357-6" title="6"></a>
<a class="sourceLine" id="cb357-7" title="7"></a>
<a class="sourceLine" id="cb357-8" title="8"><span class="co"># compare `departments` and` departments3` data frames</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb358-1" title="1">departments2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unite</span>(Quarter, Quarter, Year, <span class="dt">sep =</span> <span class="st">&quot;-&quot;</span>) -&gt;<span class="st"> </span>departments3</a>
<a class="sourceLine" id="cb358-2" title="2"></a>
<a class="sourceLine" id="cb358-3" title="3"><span class="kw">str</span>(departments2)</a>
<a class="sourceLine" id="cb358-4" title="4"><span class="kw">head</span>(departments2)</a>
<a class="sourceLine" id="cb358-5" title="5"><span class="kw">str</span>(departments3)</a>
<a class="sourceLine" id="cb358-6" title="6"><span class="kw">head</span>(departments3)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    28 obs. of  5 variables:
##  $ Department: chr  &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ...
##  $ Quarter   : chr  &quot;Q1&quot; &quot;Q2&quot; &quot;Q3&quot; &quot;Q4&quot; ...
##  $ Year      : chr  &quot;2015&quot; &quot;2015&quot; &quot;2015&quot; &quot;2015&quot; ...
##  $ RevenuesKn: num  12416 224290 10644 191229 258697 ...
##  $ ExpensesKn: num  23101 63886 35468 12249 61515 ...
##   Department Quarter Year RevenuesKn ExpensesKn
## 1          A      Q1 2015    12416.2    23100.5
## 2          A      Q2 2015   224290.1    63886.1
## 3          A      Q3 2015    10643.7    35467.8
## 4          A      Q4 2015   191229.3    12249.1
## 5          A      Q1 2016   258697.4    61514.6
## 6          A      Q2 2016   121865.3    46092.6
## &#39;data.frame&#39;:    28 obs. of  4 variables:
##  $ Department: chr  &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ...
##  $ Quarter   : chr  &quot;Q1-2015&quot; &quot;Q2-2015&quot; &quot;Q3-2015&quot; &quot;Q4-2015&quot; ...
##  $ RevenuesKn: num  12416 224290 10644 191229 258697 ...
##  $ ExpensesKn: num  23101 63886 35468 12249 61515 ...
##   Department Quarter RevenuesKn ExpensesKn
## 1          A Q1-2015    12416.2    23100.5
## 2          A Q2-2015   224290.1    63886.1
## 3          A Q3-2015    10643.7    35467.8
## 4          A Q4-2015   191229.3    12249.1
## 5          A Q1-2016   258697.4    61514.6
## 6          A Q2-2016   121865.3    46092.6</code></pre>
</div>
<hr />
</div>
</div>
<div id="exercise-tasks" class="section level2 unnumbered">
<h2>Exercise Tasks</h2>
<ol style="list-style-type: decimal">
<li>Initialize the random number generator using the command <code>set.seed (1234)</code>. Then, with the help of a single command and the `%&gt;% ’operator, perform the following:</li>
</ol>
<ul>
<li>create 100,000 random numbers drawn from the normal distribution with arithmetic mean of 10000 and standard deviation of 1000</li>
<li>round the numbers to the first larger integer</li>
<li>drop duplicates from the set</li>
<li>sort the set in ascending order</li>
<li>randomly select 100 elements from the set</li>
<li>organize these 100 elements into a 10x10 matrix, arranged in rows</li>
<li>calculate sums of rows of the matrix</li>
<li>print the mean of line sums on the screen.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>The <code>weather.csv</code> file contains meteorological station meteorological data which measures the temperature, pressure, humidity and wind speed every hour (data are downloaded and adapted from the data set of the<code>weatherData</code> package available on CRAN). Do the following:</li>
</ol>
<ul>
<li>load the file into the data frame and examine the loaded data (<code>names</code>, <code>str</code>, <code>summary</code>,<code>head</code> …)</li>
<li>answer: is it a tidy dataset? Why?</li>
<li>Take the appropriate steps to obtain a data frame that complies with the tidy data principle</li>
<li>save the new data frame to the file called <code>weatherClean.csv</code></li>
</ul>
<hr />
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Programirajmo u R-u</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://www.fer.unizg.hr/en/damir.pintar" property="cc:attributionName" rel="cc:attributionURL">Damir Pintar</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="https://ratnip.github.io/FER_OPJR/" rel="dct:source">https://ratnip.github.io/FER_OPJR/</a></p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-magrittr">
<p>Bache, Stefan Milton, and Hadley Wickham. 2014. <em>Magrittr: A Forward-Pipe Operator for R</em>. <a href="https://CRAN.R-project.org/package=magrittr">https://CRAN.R-project.org/package=magrittr</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="apply.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dates.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed",
"edit": null,
"download": null,
"search": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
